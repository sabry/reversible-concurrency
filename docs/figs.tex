% The syntax and semantics
\newcommand{\syntax}{
  \begin{sdisplaymath}
    \begin{array}{lcrl}
      \mbox{\textit{Continuation}} &
      \K & \defeq & \Kjudg{\S}{\E}
      \\[2pt]
      \mbox{\textit{State}} &
      \S & \defeq & \Ks;\T;\K_c;\Cs;\Cr
      \\[2pt]
      \mbox{\textit{Parallel Threads}} &
      \P & \bnfdef & \Pjudg{\P}{\P} \bnfalt \K
      \\[2pt]
%      \mbox{\textit{Process ID}} &
%      \pid & \defeq & \textit{A representation process IDis}
%      \\[2pt]
      \mbox{\textit{Logical time}} &
      \T & \defeq & \textit{A representation of the logical time of
        the thread} 
      \\[2pt]
      \mbox{\textit{Choice Continutation}} &
      \K_c & \defeq & \textit{The continuation of the last 'choose'}
      \\[2pt]
      \mbox{\textit{Send Channel IDs}} &
      \Cs & \bnfdef & \cdot \bnfalt \Cs[\chx \mapsto \T]
      \\[2pt]
      \mbox{\textit{Receive Channel IDs}} & 
      \Cr & \bnfdef & \cdot \bnfalt \Cr[\chx \mapsto \T]
      \\[2pt]
      \mbox{\textit{Continuation Stack}} &
      \Ks & \bnfdef & \cdot \bnfalt \Ks[\K]
      \\[2pt]
      \mbox{\textit{Global Channel State}} &
      \CH & \bnfdef & \cdot \bnfalt \CH[\chx \mapsto \ch]
      \\[2pt]
      \mbox{\textit{Channel}} &
      \ch & \defeq & \left(s,c,r\right)
      \\[2pt]
      \mbox{\textit{Evaluation Context}} &
      \E & \bnfdef & \cdot \bnfalt \sync{\K} \bnfalt \E[\e]
      \\[2pt]
      \mbox{\textit{Terms}} &
      \e & \bnfdef & \send \bnfalt \recv \bnfalt \yield \bnfalt \newchan
        \bnfalt \choose \bnfalt \backtrack \bnfalt \return
      \\[2pt]
      \mbox{\textit{Values}} &
      \v & \bnfdef & \unit \bnfalt 0,1,\dots 
    \end{array}
  \end{sdisplaymath}
}

\newcommand{\statepreds}{
  \begin{tabbing}
    $\chx(\spr$\=$< s)~if:$\+\\
       $s=c=r$\\
       $s > c, r=c$\\
       $s < c, r < c, s > r$
    \-
    \\[2pt]
    $\chx(\spr > s)~if:$\\
    \> $s=c=r$
    \\[2pt]
    $\chx(\cpr = s)~if:$\\
    \> $r=s, s>c$
    \> $r=s, s<c$
    \\[2pt]
    $\chx(\rpr < r)~if:$\+\\
       $r=c=s$\\
       $s>c,r=c$\\
       $s<c,r<c,s<r$
    \-
    \\[2pt]
    $\chx(\rpr > r)~if:$\\
    \> $s>c,r=c$
  \end{tabbing}
}

\newcommand{\semantics}{
}

\newcommand{\SyntaxFigure}[1][th]{
  \begin{figure}[#1]
    \syntax
    \caption{Syntax} 
    \label{fig:syntax}
  \end{figure}
}

\newcommand{\SemanticsFigure}[1][th]{
  \begin{figure}[#1]
    \semantics
    \caption{Semantics} 
    \label{fig:semantics}
  \end{figure}
}

\newcommand{\StatePredFigure}[1][th]{
  \begin{figure}[#1]
    \statepreds
    \caption{State Predicates} 
    \label{fig:state-preds}
  \end{figure}   
}
